@if (!dataPage()) {
<h1>No hay facilidades para editar</h1>
}

<div class="w-full max-w-7xl mx-auto p-6">
  <form [formGroup]="updateForm" (ngSubmit)="onSubmitUpdate()" class="w-full">
    <input type="text" formControlName="id" class="hidden" />

    <div class="grid grid-cols-1 md:grid-cols-12 gap-6 items-start">
      <!-- Imagen -->
      <div class="col-span-1 md:col-span-2">
        <div class="relative group cursor-pointer rounded-lg overflow-hidden max-w-xs mx-auto md:max-w-none">

          <img [src]="image()" alt="Facility Image"
            class="w-full h-48 object-cover rounded-lg shadow-md transition-all duration-300 group-hover:brightness-50" />
          <div
            class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg pointer-events-none group-hover:pointer-events-auto">

            <label
              class="bg-white bg-opacity-90 hover:bg-opacity-100 px-3 py-2 rounded-lg shadow-lg cursor-pointer transition-all duration-200 transform hover:scale-105">
              <div class="flex flex-col items-center space-y-1">

                <!-- Icono de cámara más simple -->
                <svg class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0118.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z">
                  </path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>

                <span class="text-xs font-medium text-gray-700">Cambiar</span>
              </div>

              <input type="file" (change)="onFileSelected($event)" accept="image/jpeg,image/png,image/gif,image/webp"
                class="hidden" />
            </label>

          </div>
        </div>
      </div>

      <!-- Contenido -->
      <div class="col-span-1 md:col-span-8">
        <label class="block text-sm font-medium text-gray-700 mb-2">Contenido de la facilidad</label>
        <textarea formControlName="content" rows="6"
          class="w-full p-3 border border-gray-300 rounded-lg shadow-sm resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"></textarea>
        @if (updateForm.get('content')?.invalid && updateForm.get('content')?.touched) {
        <div class="text-red-500 text-sm mt-1">
          El contenido es requerida
        </div>
        }
      </div>

      <!-- Botones -->
      <div class="col-span-1 md:col-span-2 flex justify-start gap-4">
        <button type="submit"
          class="px-6 py-2.5 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors duration-200 font-medium text-sm shadow-sm">
          Actualizar
        </button>

        <button type="button" (click)="deleteFacility(idFacility())"
          class="px-6 py-2.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200 font-medium text-sm">
          Eliminar
        </button>
      </div>
    </div>
  </form>
</div>